!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}enableValidation(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnRemoteClick=this._closePopupOnRemoteClick.bind(this)}open(){this._popup.classList.add("popup_open"),this._popup.addEventListener("mousedown",this._closePopupOnRemoteClick),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._closePopupOnRemoteClick)}_closePopupOnRemoteClick(e){e.target.classList.contains("popup__overlay")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close-btn").addEventListener("click",(()=>this.close()))}}var o=class extends s{constructor(e,t){let{handleFormSubmit:s}=t;super(e),this._form=this._popup.querySelector(".popup__form"),this._handleFormSubmit=s,this._inputList=this._form.querySelectorAll(".popup__form-input"),this._saveButton=this._form.querySelector(".popup__button"),this._saveButtonText=this._saveButton.value}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){return this._objData={},this._inputList.forEach((e=>{this._objData[e.name]=e.value})),this._objData}setInputValues(e){this._objInput={},this._inputList.forEach((t=>{console.log(e),this._objInput[t.name]=e[t.value]}))}close(){super.close(),this._form.reset()}open(){super.open(),this._saveButton.value=this._saveButtonText}};const n=document.querySelector(".account__edit-button"),r=(document.querySelector(".account__name"),document.querySelector(".account__description"),document.querySelector(".popup__edit-close"),document.querySelector(".popup__account-name")),i=document.querySelector(".popup__account-description"),c=document.querySelector(".popup__edit-form"),a=document.querySelector(".account__add-button"),l=(document.querySelector(".popup__place-close-btn"),document.querySelector(".popup__place-name"),document.querySelector(".popup__place-link"),document.querySelector(".popup__place-form")),u=document.querySelector(".cards__list"),_={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-type-error",errorClass:"popup__error_visible"};new class{constructor(e){let{baseUrl:t,authToken:s}=e;this._baseUrl=t,this._authToken=s}getCardList(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authToken}}).then((e=>{e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((e=>{console.log(e)}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}).getCardList().then((e=>{const t=new class{constructor(e,t){let{items:s,renderer:o}=e;this._renderedItems=s,this._renderer=o,this._container=t}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:e,renderer:e=>{t.addItem(p(e))}},u)}));const p=e=>new class{constructor(e,s,o){t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__place-favorite_active")})),t(this,"_handleDeleteButton",(()=>{this._cardElement.remove(),this._cardElement=null})),this.handleCardClick=o,this._name=e.name,this._link=e.link,this._cardSelector=s}_setEventListeners(){this._cardElement.querySelector(".card__place-favorite").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__trash").addEventListener("click",(()=>{this._handleDeleteButton(this._cardElement)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this.handleCardClick({link:this._link,name:this._name})}))}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}getView(){this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__place-name").textContent=this._name;const e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._setEventListeners(),this._cardElement}}(e,"#card-template",(()=>{h(e)}),(()=>{document.querySelector(".cards__list").childNodes.length?document.querySelector(".cards__no-places").classList.remove("cards__no-places_active"):document.querySelector(".cards__no-places").classList.add("cards__no-places_active")})).getView(),d=new class extends s{constructor(e){super(e),this._cardImage=document.querySelector(".popup__image-preview")}open(e,t){const s=this._cardImage;s.src=t,s.alt=e,document.querySelector(".popup__preview-name").textContent=e,super.open()}}("#view__image"),h=e=>{d.open(e.name,e.link)},m=new o("#add__place",{handleFormSubmit:e=>{getCardList.addItem(p(e)),m.close()}});a.addEventListener("click",(()=>{m.open(),L.resetValidation()}));const v=new class{constructor(e){let{nameSelector:t,careerSelector:s}=e;this._name=document.querySelector(t),this._career=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,occupation:this._career.textContent}}setUserInfo(e){this._name.textContent=e.name,this._career.textContent=e.occupation}}({nameSelector:".account__name",careerSelector:".account__description"}),E=new o("#account__edit",{handleFormSubmit:e=>{v.setUserInfo(e),E.close()}});n.addEventListener("click",(()=>{const{name:e,occupation:t}=v.getUserInfo();r.value=e,i.value=t,E.open(),S.resetValidation()}));const S=new e(_,c),L=new e(_,l);L.enableValidation(),S.enableValidation(),E.setEventListeners(),d.setEventListeners(),m.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TW5FLEtBQUtvSCxNQUFNM0YsWUFBYXNILFdBQVkvSSxLQUFLNkksUUFBUXBILFlBQ2pFLENBRUR1SCxZQUFZM0UsR0FDVnJFLEtBQUtvSCxNQUFNM0YsWUFBYzRDLEVBQUtGLEtBQzlCbkUsS0FBSzZJLFFBQVFwSCxZQUFjNEMsRUFBSzBFLFVBQ2pDLEdMa0Y4QixDQUMvQkosYUR6RnlCLGlCQzBGekJDLGVEeEZBLDBCQzJGSUssRUFBZ0IsSUFBSVQsRUR6RkMsaUJDeUYwQixDQUNuRDlFLGlCQUFtQlcsSUFDakJxRSxFQUFZTSxZQUFZM0UsR0FDeEI0RSxFQUFjOUYsT0FBZCxJQUlKdUIsRUFBbUJyQyxpQkFBaUIsU0FBUyxLQUMzQyxNQUFNLEtBQUM4QixFQUFELFdBQU80RSxHQUFjTCxFQUFZSSxjQUN2Q25FLEVBQWlCWixNQUFRSSxFQUN6QlMsRUFBa0JiLE1BQVFnRixFQUMxQkUsRUFBYy9GLE9BQ2RnRyxFQUFxQnhHLGlCQUFyQixJQUdGLE1BQU13RyxFQUF1QixJQUFJQyxFQUMvQnJKLEVBQ0ErRSxHQUdJNEQsRUFBc0IsSUFBSVUsRUFDOUJySixFQUNBaUYsR0FHRjBELEVBQW9CbEcsbUJBQ3BCMkcsRUFBcUIzRyxtQkFDckIwRyxFQUFjeEYsb0JBQ2QyRSxFQUFrQjNFLG9CQUNsQjhFLEVBQVc5RSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG5cclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHsgXHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4geyBcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2d250KSB7XHJcbiAgICAgIGV2d250LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkgeyBcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHsgXHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcbiAgXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHsgXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcikgeyBcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7IFxyXG4gICAgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2sgPSB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljay5iaW5kKHRoaXMpOyBcclxuICB9IFxyXG4gXHJcbiAgb3BlbigpIHsgXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTsgXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKTsgXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7IFxyXG4gIH0gXHJcbiBcclxuICBjbG9zZSgpIHsgXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTsgXHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7IFxyXG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7IFxyXG4gIH0gXHJcbiBcclxuICBfY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2soZXZ0KSB7IFxyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX292ZXJsYXlcIikpIHsgXHJcbiAgICAgIHRoaXMuY2xvc2UoKTsgXHJcbiAgICB9IFxyXG4gIH0gXHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHsgXHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikgeyBcclxuICAgICAgdGhpcy5jbG9zZSgpOyBcclxuICAgIH0gXHJcbiAgfSBcclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cCBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKSBcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpOyBcclxuICB9IFxyXG59ICIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiOyBcclxuXHJcbiBcclxuIGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7IFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7IFxyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IFxyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7IFxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7IFxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3JtLWlucHV0XCIpOyBcclxuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTsgXHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uVGV4dCA9IHRoaXMuX3NhdmVCdXR0b24udmFsdWU7XHJcbiAgfVxyXG4gXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4geyBcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IFxyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpOyBcclxuICAgfSk7IFxyXG4gIH0gXHJcbiAgXHJcbiAgX2dldElucHV0VmFsdWVzKCkgeyBcclxuICAgIHRoaXMuX29iakRhdGEgPSB7fTsgXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHsgXHJcbiAgICAgIHRoaXMuX29iakRhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTsgXHJcbiAgICB9KTsgXHJcbiAgICByZXR1cm4gdGhpcy5fb2JqRGF0YTsgXHJcbiAgfSBcclxuIFxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHsgXHJcbiAgICB0aGlzLl9vYmpJbnB1dCA9IHt9OyBcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4geyBcclxuICAgICAgY29uc29sZS5sb2coZGF0YSk7IFxyXG4gICAgICB0aGlzLl9vYmpJbnB1dFtpbnB1dC5uYW1lXSA9IGRhdGFbaW5wdXQudmFsdWVdOyBcclxuICAgIH0pOyBcclxuICB9IFxyXG4gIGNsb3NlKCkgeyBcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7IFxyXG4gIH0gXHJcblxyXG4gIG9wZW4oKSB7IFxyXG4gICAgc3VwZXIub3BlbigpOyBcclxuICAgIHRoaXMuX3NhdmVCdXR0b24udmFsdWUgPSB0aGlzLl9zYXZlQnV0dG9uVGV4dDsgXHJcbiAgfSBcclxufSBcclxuXHJcbiBcclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTsiLCIvL0FjY291bnQgYW5kIFBsYWNlIFNlY3Rpb25zXHJcbmV4cG9ydCBjb25zdCBlZGl0QWNjb3VudE9wZW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmFjY291bnRfX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhY2NvdW50TmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgYWNjb3VudFRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY291bnRfX2Rlc2NyaXB0aW9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWNjb3VudE5hbWUgPSBcIi5hY2NvdW50X19uYW1lXCI7XHJcbmV4cG9ydCBjb25zdCBhY2NvdW50VGl0bGUgPSBcclxuICBcIi5hY2NvdW50X19kZXNjcmlwdGlvblwiXHJcbjtcclxuZXhwb3J0IGNvbnN0IGFjY291bnRGb3JtID0gXCIjYWNjb3VudF9fZWRpdFwiO1xyXG5leHBvcnQgY29uc3QgZWRpdEFjY291bnRDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2VkaXQtY2xvc2VcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEFjY291bnROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYWNjb3VudC1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBY2NvdW50VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19hY2NvdW50LWRlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEFjY291bnRFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1mb3JtXCIpO1xyXG5cclxuLy8gUG9wdXAgU2VjdGlvbnNcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkUGxhY2VGb3JtID0gXCIjYWRkX19wbGFjZVwiO1xyXG5leHBvcnQgY29uc3QgYWRkUGxhY2VzT3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3VudF9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19wbGFjZS1jbG9zZS1idG5cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQbGFjZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQbGFjZVVybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLWxpbmtcIik7XHJcbmV4cG9ydCBjb25zdCBzdWJtaXROZXdQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLWZvcm1cIik7XHJcblxyXG4vLyBDYXJkcyBMaXN0XHJcbmV4cG9ydCBjb25zdCBwbGFjZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuLy8gUGxhY2UgQ2FyZHNcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlJlYWNoaW5nIGZvciB0aGUgTW9vblwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4Lzg4LzliLzM2Lzg4OWIzNjA3YjJiOTM0MzBiNDBkN2YwM2FlOTE4ZThkLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJQb3J0cmFpdCBvZiBCYXJiYXJhIG9mIFBvcnR1Z2FsXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvOGEvYTAvNzAvOGFhMDcwNTMxNzhjYjFiYmI0YTNmOTMzNzlkNzUwZDIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlNpbWVyZW55YVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzQ2LzY2LzMwLzQ2NjYzMDUwZTM4ODU1MGJmMjRiODA4NjE3OTYyNzFlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJDdXBpZCBhbmQgUHN5Y2hlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvMTYvZTIvOGIvMTZlMjhiYmI0ODgwODVjZjVkZjY5ZjYyYzA3NzkxY2IuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlN0cmVldCBpbiB0aGUgRXZlbmluZywgUHJhZ3VlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvZmUvODUvM2IvZmU4NTNiMTJlZTUyOTBhNGIwOTY3ZWM2ZTIwZGU3ODIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdpcmwgYXQgdGhlIFBpYW5vXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvZDcvMGIvNTMvZDcwYjUzNDc5MWY1MGY2MmU3NDE2NjlhZWNkN2E0NzkuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdvaW5nIEhvbWVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9hZC81My8yYi9hZDUzMmIzMWJiZmNkMDA2YzZiOGYzM2E5YjRjZWJmMy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiUmFpbnkgTmlnaHRcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC8xYS81MC8zMi8xYTUwMzIxYjkwNWI1ZGRkNjBiMjgwMmMxYjUwYWQ0Yi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVGhlIFNwcmVhZGluZyBUcmVlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvZDYvYjIvZjkvZDZiMmY5NDY1Nzk3YzRhZGVjNWZjYTY0MWExZGQyZDguanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIFZhbGlkYXRvcnNcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LXR5cGUtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsIi8vIEluZGV4IENTUyBJbXBvcnRcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vIEpTIEltcG9ydHNcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9hcGkuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZWRpdEFjY291bnRPcGVuQnRuLFxyXG4gIGFjY291bnROYW1lLFxyXG4gIGFjY291bnRUaXRsZSxcclxuICBhY2NvdW50Rm9ybSxcclxuICBwb3B1cEFjY291bnROYW1lLFxyXG4gIGFjY291bnROYW1lSW5wdXQsXHJcbiAgYWNjb3VudFRpdGxlSW5wdXQsXHJcbiAgcG9wdXBBY2NvdW50VGl0bGUsXHJcbiAgc3VibWl0QWNjb3VudEVkaXQsXHJcbiAgcG9wdXBBZGRQbGFjZUZvcm0sXHJcbiAgYWRkUGxhY2VzT3BlbkJ0bixcclxuICBwb3B1cFBsYWNlTmFtZSxcclxuICBwb3B1cFBsYWNlVXJsLFxyXG4gIHN1Ym1pdE5ld1BsYWNlLFxyXG4gIHBsYWNlTGlzdCxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSAoe1xyXG5iYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuYXV0aFRva2VuOiBcIjA5OTk4OWY3LTk3NDItNDZlZi05OWY4LWFhOGU2ODcyYTZjM1wiXHJcbn0pO1xyXG5cclxuYXBpLmdldENhcmRMaXN0KCkudGhlbihjYXJkRGF0YSA9PiB7XHJcbiAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbiggXHJcbiAgICB7IFxyXG4gICAgICBpdGVtczogY2FyZERhdGEsIFxyXG4gICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7IFxyXG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpOyBcclxuICAgICAgfSwgXHJcbiAgICB9LCBcclxuICAgIHBsYWNlTGlzdCBcclxuICApOyBcclxufSk7XHJcblxyXG4vLyBDYXJkIEZ1bmN0aW9uc1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4geyBcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoIFxyXG4gICAgY2FyZERhdGEsIFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgKCkgPT4geyBcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrKGNhcmREYXRhKTsgXHJcbiAgICB9LCBcclxuXHJcbiAgICAoKSA9PiB7IFxyXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKS5jaGlsZE5vZGVzLmxlbmd0aCkgeyBcclxuICAgICAgICBkb2N1bWVudCBcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19uby1wbGFjZXNcIikgXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRzX19uby1wbGFjZXNfYWN0aXZlXCIpOyBcclxuICAgICAgfSBlbHNlIHsgXHJcblxyXG4gICAgICAgIGRvY3VtZW50IFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX25vLXBsYWNlc1wiKSBcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZHNfX25vLXBsYWNlc19hY3RpdmVcIik7IFxyXG4gICAgICB9IFxyXG4gICAgfSBcclxuICApOyBcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7IFxyXG59OyBcclxuXHJcblxyXG5cclxuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjdmlld19faW1hZ2VcIik7IFxyXG5cclxuIFxyXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoaXRlbSkgPT4geyBcclxuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTsgXHJcbn07XHJcbi8vQ2FyZCBTdWJtaXQgRm9ybVxyXG5jb25zdCBhZGROZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRQbGFjZUZvcm0sIHsgXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHsgXHJcbiAgICBnZXRDYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpOyBcclxuICAgIGFkZE5ld0NhcmQuY2xvc2UoKTsgXHJcbiAgfSwgXHJcbn0pOyBcclxuIFxyXG5hZGRQbGFjZXNPcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxyXG4gIGFkZE5ld0NhcmQub3BlbigpOyBcclxuICBwbGFjZXNGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyBcclxufSk7IFxyXG4vL0VkaXQgU3VibWl0IEZvcm1cclxuIFxyXG5jb25zdCBuZXdVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IFxyXG4gIG5hbWVTZWxlY3RvcjogYWNjb3VudE5hbWUsIFxyXG4gIGNhcmVlclNlbGVjdG9yOiBhY2NvdW50VGl0bGVcclxufSk7IFxyXG5cclxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGFjY291bnRGb3JtLCB7IFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7IFxyXG4gICAgbmV3VXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7IFxyXG4gICAgZWRpdEZvcm1Qb3B1cC5jbG9zZSgpOyBcclxuICB9LCBcclxufSk7IFxyXG5cclxuZWRpdEFjY291bnRPcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxyXG4gIGNvbnN0IHtuYW1lLCBvY2N1cGF0aW9ufSA9IG5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICBwb3B1cEFjY291bnROYW1lLnZhbHVlID0gbmFtZTtcclxuICBwb3B1cEFjY291bnRUaXRsZS52YWx1ZSA9IG9jY3VwYXRpb247XHJcbiAgZWRpdEZvcm1Qb3B1cC5vcGVuKCk7IFxyXG4gIGFjY291bnRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyBcclxufSk7IFxyXG5cclxuY29uc3QgYWNjb3VudEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgc3VibWl0QWNjb3VudEVkaXRcclxuKTtcclxuXHJcbmNvbnN0IHBsYWNlc0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgc3VibWl0TmV3UGxhY2VcclxuKTtcclxuXHJcbnBsYWNlc0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hY2NvdW50Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbnByZXZpZXdJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG5hZGROZXdDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG4iLCJjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGF1dGhUb2tlbn0pIHtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XHJcbiAgICB9XHJcblxyXG5cclxuLy8gR0VUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcclxuZ2V0Q2FyZExpc3QoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4geyByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuLy8gR0VUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvdXNlcnMvbWVcclxuLy8gZ2V0VXNlckluZm8oKSB7XHJcblxyXG4vLyB9XHJcblxyXG5cclxuLy8gZ2V0QXBwSW5mbyB7IH1cclxuXHJcblxyXG4vLyBQT1NUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcclxuLy8gYWRkQ2FyZCh7bmFtZSwgbGlua30pIHtcclxuXHJcbi8vIH1cclxuXHJcblxyXG4vLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkcy9jYXJkSWRcclxuLy8gcmVtb3ZlQ2FyZChjYXJkSUQpIHtcclxuXHJcbi8vIH1cclxuXHJcbi8vIC8vIFBVVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzL2xpa2VzL2NhcmRJZFxyXG5cclxuLy8gLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHMvbGlrZXMvY2FyZElkXHJcbi8vIGNoYW5nZUxpa2VDYXJkU3RhdHVzKGNhcmRJZCwgbGlrZSkge31cclxuXHJcbi8vIC8vIFBBVENIIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvdXNlcnMvbWVcclxuLy8gc2V0VXNlckluZm8oKSB7fVxyXG5cclxuLy8gLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZS9hdmF0YXJcclxuLy8gc2V0VXNlckF2YXRhcmdpdCgpIHt9XHJcblxyXG5cclxuXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcGk7XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gXHJcblxyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikgeyBcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtczsgXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyBcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjsgXHJcbiAgfSBcclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7IFxyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7IFxyXG4gIH0gXHJcblxyXG4gIHJlbmRlckl0ZW1zKCkgeyBcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4geyBcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcbn0gXHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiAiLCJjbGFzcyBDYXJkIHsgXHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHsgXHJcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljazsgXHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lOyBcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7IFxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yOyBcclxuICB9IFxyXG4gXHJcbiAgX2hhbmRsZUxpa2VCdXR0b24gPSAoZXZ0KSA9PiB7IFxyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fcGxhY2UtZmF2b3JpdGVfYWN0aXZlXCIpOyBcclxuICB9OyBcclxuXHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbiA9ICgpID0+IHsgXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTsgXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7IFxyXG4gIH07IFxyXG4vL3J1bnMgM3JkIFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGxhY2UtZmF2b3JpdGVcIikgXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKVxyXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24odGhpcy5fY2FyZEVsZW1lbnQpOyBcclxuICAgIH0pOyBcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikgXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayh7IGxpbms6dGhpcy5fbGluaywgbmFtZTp0aGlzLl9uYW1lfSk7IFxyXG4gICAgICB9KTsgXHJcbiAgfSBcclxuLy9ydW5zIDJuZCBcclxuICBfZ2V0VGVtcGxhdGUoKSB7IFxyXG4gICAgcmV0dXJuIGRvY3VtZW50IFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpIFxyXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7IFxyXG4gIH0gXHJcblxyXG4vL3J1bnMgMXN0IFxyXG5cclxuXHJcblxyXG5nZXRWaWV3KCkgeyBcclxuICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7IFxyXG4gIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGxhY2UtbmFtZVwiKS50ZXh0Q29udGVudCA9IFxyXG4gICAgdGhpcy5fbmFtZTsgXHJcbiAgY29uc3QgcGhvdG9FbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTsgXHJcbiAgcGhvdG9FbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7IFxyXG4gIHBob3RvRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lOyBcclxuICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyBcclxuICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7IFxyXG59XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsgXHJcblxyXG4gIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7IFxyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7IFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHsgXHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1wcmV2aWV3XCIpOyBcclxuICB9IFxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHsgXHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkSW1hZ2U7IFxyXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7IFxyXG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7IFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXHJcbiAgICAgIFwiLnBvcHVwX19wcmV2aWV3LW5hbWVcIiBcclxuICAgICkudGV4dENvbnRlbnQgPSBuYW1lOyBcclxuICAgIHN1cGVyLm9wZW4oKTsgXHJcbiAgfSBcclxufSBcclxuXHJcbiBcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyAiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7IFxyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBjYXJlZXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpOyBcclxuICAgIHRoaXMuX2NhcmVlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZWVyU2VsZWN0b3IpOyBcclxuICB9IFxyXG5cclxuICBnZXRVc2VySW5mbygpIHsgXHJcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBvY2N1cGF0aW9uOiB0aGlzLl9jYXJlZXIudGV4dENvbnRlbnQgfTsgXHJcbiAgfSBcclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkgeyBcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7IFxyXG4gICAgdGhpcy5fY2FyZWVyLnRleHRDb250ZW50ID0gZGF0YS5vY2N1cGF0aW9uOyBcclxuICB9IFxyXG59IFxyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybSIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2d250IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2siLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3NhdmVCdXR0b24iLCJfc2F2ZUJ1dHRvblRleHQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9vYmpEYXRhIiwiaW5wdXQiLCJuYW1lIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwiX29iaklucHV0IiwiY29uc29sZSIsImxvZyIsInJlc2V0IiwiZWRpdEFjY291bnRPcGVuQnRuIiwicG9wdXBBY2NvdW50TmFtZSIsInBvcHVwQWNjb3VudFRpdGxlIiwic3VibWl0QWNjb3VudEVkaXQiLCJhZGRQbGFjZXNPcGVuQnRuIiwic3VibWl0TmV3UGxhY2UiLCJwbGFjZUxpc3QiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiX2Jhc2VVcmwiLCJfYXV0aFRva2VuIiwiZ2V0Q2FyZExpc3QiLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNhcmREYXRhIiwiY2FyZExpc3QiLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiY3JlYXRlQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsIl9uYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImdldFZpZXciLCJwaG90b0VsZW1lbnQiLCJzcmMiLCJhbHQiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwicHJldmlld0ltYWdlUG9wdXAiLCJfY2FyZEltYWdlIiwiaW1hZ2VFbGVtZW50IiwiYWRkTmV3Q2FyZCIsIlBvcHVwV2l0aEZvcm0iLCJwbGFjZXNGb3JtVmFsaWRhdG9yIiwibmV3VXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJjYXJlZXJTZWxlY3RvciIsIl9jYXJlZXIiLCJnZXRVc2VySW5mbyIsIm9jY3VwYXRpb24iLCJzZXRVc2VySW5mbyIsImVkaXRGb3JtUG9wdXAiLCJhY2NvdW50Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9