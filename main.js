!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e,t){const n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}enableValidation(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class n{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnRemoteClick=this._closePopupOnRemoteClick.bind(this)}open(){this._popup.classList.add("popup_open"),this._popup.addEventListener("mousedown",this._closePopupOnRemoteClick),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._closePopupOnRemoteClick)}_closePopupOnRemoteClick(e){e.target.classList.contains("popup__overlay")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close-btn").addEventListener("click",(()=>this.close()))}}var s=class extends n{constructor(e,t){let{handleFormSubmit:n}=t;super(e),this._form=this._popup.querySelector(".popup__form"),this._handleFormSubmit=n,this._inputList=this._form.querySelectorAll(".popup__form-input"),this._saveButton=this._form.querySelector(".popup__button"),this._saveButtonText=this._saveButton.value}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){return this._objData={},this._inputList.forEach((e=>{this._objData[e.name]=e.value})),this._objData}setInputValues(e){this._objInput={},this._inputList.forEach((t=>{console.log(e),this._objInput[t.name]=e[t.value]}))}close(){super.close(),this._form.reset()}open(){super.open(),this._saveButton.value=this._saveButtonText}};class o{constructor(e){let{nameSelector:t,careerSelector:n}=e;this._name=document.querySelector(t),this._career=document.querySelector(n)}getUserInfo(){return{name:this._name.textContent,occupation:this._career.textContent}}setUserInfo(e){this._name.textContent=e.name,this._career.textContent=e.occupation}}const r=document.querySelector(".account__edit-button"),i=(document.querySelector(".account__name"),document.querySelector(".account__description"),document.querySelector(".popup__edit-close"),document.querySelector(".popup__account-name")),a=document.querySelector(".popup__account-description"),c=document.querySelector(".popup__edit-form"),l=document.querySelector(".account__add-button"),u=(document.querySelector(".popup__place-close-btn"),document.querySelector(".popup__place-name"),document.querySelector(".popup__place-link"),document.querySelector(".popup__place-form")),_=document.querySelector(".cards__list"),p={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-type-error",errorClass:"popup__error_visible"},d=new class{constructor(e){let{baseUrl:t,authToken:n}=e;this._baseUrl=t,this._authToken=n}getCardList(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}),h=new o({nameSelector:".account__name",careerSelector:".account__description"});d.getUserInfo().then((e=>{o.setUserInfo({nameSelector:e.name,careerSelector:e.about})}));const m=e=>new class{constructor(e,n,s){t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__place-favorite_active")})),t(this,"_handleDeleteButton",(()=>{this._cardElement.remove(),this._cardElement=null})),this.handleCardClick=s,this._name=e.name,this._link=e.link,this._cardSelector=n}_setEventListeners(){this._cardElement.querySelector(".card__place-favorite").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__trash").addEventListener("click",(()=>{this._handleDeleteButton(this._cardElement)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this.handleCardClick({link:this._link,name:this._name})}))}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}getView(){this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__place-name").textContent=this._name;const e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._setEventListeners(),this._cardElement}}(e,"#card-template",(()=>{v(e)}),(()=>{document.querySelector(".cards__list").childNodes.length?document.querySelector(".cards__no-places").classList.remove("cards__no-places_active"):document.querySelector(".cards__no-places").classList.add("cards__no-places_active")})).getView(),b=new class{constructor(e,t){let{items:n,renderer:s}=e;this._renderedItems=n,this._renderer=s,this._container=t}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Reaching for the Moon",link:"https://i.pinimg.com/564x/88/9b/36/889b3607b2b93430b40d7f03ae918e8d.jpg"},{name:"Portrait of Barbara of Portugal",link:"https://i.pinimg.com/564x/8a/a0/70/8aa07053178cb1bbb4a3f93379d750d2.jpg"},{name:"Simerenya",link:"https://i.pinimg.com/564x/46/66/30/46663050e388550bf24b80861796271e.jpg"},{name:"Cupid and Psyche",link:"https://i.pinimg.com/564x/16/e2/8b/16e28bbb488085cf5df69f62c07791cb.jpg"},{name:"Street in the Evening, Prague",link:"https://i.pinimg.com/564x/fe/85/3b/fe853b12ee5290a4b0967ec6e20de782.jpg"},{name:"Girl at the Piano",link:"https://i.pinimg.com/564x/d7/0b/53/d70b534791f50f62e741669aecd7a479.jpg"},{name:"Going Home",link:"https://i.pinimg.com/564x/ad/53/2b/ad532b31bbfcd006c6b8f33a9b4cebf3.jpg"},{name:"Rainy Night",link:"https://i.pinimg.com/564x/1a/50/32/1a50321b905b5ddd60b2802c1b50ad4b.jpg"},{name:"The Spreading Tree",link:"https://i.pinimg.com/564x/d6/b2/f9/d6b2f9465797c4adec5fca641a1dd2d8.jpg"}],renderer:e=>{b.addItem(m(e))}},_),f=new class extends n{constructor(e){super(e),this._cardImage=document.querySelector(".popup__image-preview")}open(e,t){const n=this._cardImage;n.src=t,n.alt=e,document.querySelector(".popup__preview-name").textContent=e,super.open()}}("#view__image"),v=e=>{f.open(e.name,e.link)},S=new s("#add__place",{handleFormSubmit:e=>{b.addItem(m(e)),S.close()}});l.addEventListener("click",(()=>{S.open(),y.resetValidation()}));const g=new s("#account__edit",{handleFormSubmit:e=>{h.setUserInfo(e),g.close()}});r.addEventListener("click",(()=>{const{name:e,occupation:t}=h.getUserInfo();i.value=e,a.value=t,g.open(),E.resetValidation()}));const E=new e(p,c),y=new e(p,u);d.getCardList().then((e=>{b.renderItems(e)})),y.enableValidation(),E.enableValidation(),g.setEventListeners(),f.setEventListeners(),S.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixNQUFRaUIsRUFDMUJrRSxFQUFjaEcsT0FDZGlHLEVBQXFCekcsaUJBQXJCLElBR0YsTUFBTXlHLEVBQXVCLElBQUlDLEVBQy9CdEosRUFDQXVGLEdBR0k0RCxFQUFzQixJQUFJRyxFQUM5QnRKLEVBQ0F5RixHQUlGRSxFQUFJSyxjQUFjSSxNQUFLbUQsSUFDckJyQixFQUFTVSxZQUFZVyxFQUFyQixJQUdGSixFQUFvQjFHLG1CQUNwQjRHLEVBQXFCNUcsbUJBQ3JCMkcsRUFBY3pGLG9CQUNkbUYsRUFBa0JuRixvQkFDbEJzRixFQUFXdEYsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL2FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7IFxyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHsgXHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkOyBcclxuICAgIH0pOyBcclxuICB9IFxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldndudCkge1xyXG4gICAgICBldndudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHsgXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7IFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpOyBcclxuICAgIH0pOyBcclxuICB9IFxyXG4gIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7IFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHsgXHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7IFxyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpOyBcclxuICAgIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrID0gdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2suYmluZCh0aGlzKTsgXHJcbiAgfSBcclxuIFxyXG4gIG9wZW4oKSB7IFxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7IFxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7IFxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpOyBcclxuICB9IFxyXG4gXHJcbiAgY2xvc2UoKSB7IFxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7IFxyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpOyBcclxuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2spOyBcclxuICB9IFxyXG4gXHJcbiAgX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKGV2dCkgeyBcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19vdmVybGF5XCIpKSB7IFxyXG4gICAgICB0aGlzLmNsb3NlKCk7IFxyXG4gICAgfSBcclxuICB9IFxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7IFxyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHsgXHJcbiAgICAgIHRoaXMuY2xvc2UoKTsgXHJcbiAgICB9IFxyXG4gIH0gXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgdGhpcy5fcG9wdXAgXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idG5cIikgXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTsgXHJcbiAgfSBcclxufSAiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjsgXHJcblxyXG4gXHJcbiBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAgeyBcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZUZvcm1TdWJtaXQgfSkgeyBcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyBcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpOyBcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0OyBcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZm9ybS1pbnB1dFwiKTsgXHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7IFxyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvblRleHQgPSB0aGlzLl9zYXZlQnV0dG9uLnZhbHVlO1xyXG4gIH1cclxuIFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkgeyBcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHsgXHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyBcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTsgXHJcbiAgIH0pOyBcclxuICB9IFxyXG4gIFxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHsgXHJcbiAgICB0aGlzLl9vYmpEYXRhID0ge307IFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7IFxyXG4gICAgICB0aGlzLl9vYmpEYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7IFxyXG4gICAgfSk7IFxyXG4gICAgcmV0dXJuIHRoaXMuX29iakRhdGE7IFxyXG4gIH0gXHJcbiBcclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7IFxyXG4gICAgdGhpcy5fb2JqSW5wdXQgPSB7fTsgXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHsgXHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyBcclxuICAgICAgdGhpcy5fb2JqSW5wdXRbaW5wdXQubmFtZV0gPSBkYXRhW2lucHV0LnZhbHVlXTsgXHJcbiAgICB9KTsgXHJcbiAgfSBcclxuICBjbG9zZSgpIHsgXHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpOyBcclxuICB9IFxyXG5cclxuICBvcGVuKCkgeyBcclxuICAgIHN1cGVyLm9wZW4oKTsgXHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uLnZhbHVlID0gdGhpcy5fc2F2ZUJ1dHRvblRleHQ7IFxyXG4gIH0gXHJcbn0gXHJcblxyXG4gXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8geyBcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgY2FyZWVyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9jYXJlZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmVlclNlbGVjdG9yKTsgXHJcbiAgfSBcclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7IFxyXG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgb2NjdXBhdGlvbjogdGhpcy5fY2FyZWVyLnRleHRDb250ZW50IH07IFxyXG4gIH0gXHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHsgXHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lOyBcclxuICAgIHRoaXMuX2NhcmVlci50ZXh0Q29udGVudCA9IGRhdGEub2NjdXBhdGlvbjsgXHJcbiAgfSBcclxufSBcclxuIiwiLy9BY2NvdW50IGFuZCBQbGFjZSBTZWN0aW9uc1xyXG5leHBvcnQgY29uc3QgZWRpdEFjY291bnRPcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5hY2NvdW50X19lZGl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgYWNjb3VudE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3VudF9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFjY291bnRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFjY291bnROYW1lID0gXCIuYWNjb3VudF9fbmFtZVwiO1xyXG5leHBvcnQgY29uc3QgYWNjb3VudFRpdGxlID0gXHJcbiAgXCIuYWNjb3VudF9fZGVzY3JpcHRpb25cIlxyXG47XHJcbmV4cG9ydCBjb25zdCBhY2NvdW50Rm9ybSA9IFwiI2FjY291bnRfX2VkaXRcIjtcclxuZXhwb3J0IGNvbnN0IGVkaXRBY2NvdW50Q2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lZGl0LWNsb3NlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBY2NvdW50TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2FjY291bnQtbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWNjb3VudFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fYWNjb3VudC1kZXNjcmlwdGlvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBzdWJtaXRBY2NvdW50RWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2VkaXQtZm9ybVwiKTtcclxuXHJcbi8vIFBvcHVwIFNlY3Rpb25zXHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZFBsYWNlRm9ybSA9IFwiI2FkZF9fcGxhY2VcIjtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlc09wZW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY291bnRfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fcGxhY2UtY2xvc2UtYnRuXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGxhY2UtbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1saW5rXCIpO1xyXG5leHBvcnQgY29uc3Qgc3VibWl0TmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1mb3JtXCIpO1xyXG5cclxuLy8gQ2FyZHMgTGlzdFxyXG5leHBvcnQgY29uc3QgcGxhY2VMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbi8vIFBsYWNlIENhcmRzXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJSZWFjaGluZyBmb3IgdGhlIE1vb25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC84OC85Yi8zNi84ODliMzYwN2IyYjkzNDMwYjQwZDdmMDNhZTkxOGU4ZC5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiUG9ydHJhaXQgb2YgQmFyYmFyYSBvZiBQb3J0dWdhbFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzhhL2EwLzcwLzhhYTA3MDUzMTc4Y2IxYmJiNGEzZjkzMzc5ZDc1MGQyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTaW1lcmVueWFcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC80Ni82Ni8zMC80NjY2MzA1MGUzODg1NTBiZjI0YjgwODYxNzk2MjcxZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQ3VwaWQgYW5kIFBzeWNoZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzE2L2UyLzhiLzE2ZTI4YmJiNDg4MDg1Y2Y1ZGY2OWY2MmMwNzc5MWNiLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTdHJlZXQgaW4gdGhlIEV2ZW5pbmcsIFByYWd1ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2ZlLzg1LzNiL2ZlODUzYjEyZWU1MjkwYTRiMDk2N2VjNmUyMGRlNzgyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHaXJsIGF0IHRoZSBQaWFub1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2Q3LzBiLzUzL2Q3MGI1MzQ3OTFmNTBmNjJlNzQxNjY5YWVjZDdhNDc5LmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHb2luZyBIb21lXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvYWQvNTMvMmIvYWQ1MzJiMzFiYmZjZDAwNmM2YjhmMzNhOWI0Y2ViZjMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlJhaW55IE5pZ2h0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvMWEvNTAvMzIvMWE1MDMyMWI5MDViNWRkZDYwYjI4MDJjMWI1MGFkNGIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlRoZSBTcHJlYWRpbmcgVHJlZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2Q2L2IyL2Y5L2Q2YjJmOTQ2NTc5N2M0YWRlYzVmY2E2NDFhMWRkMmQ4LmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBWYWxpZGF0b3JzXHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC10eXBlLWVycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCIvLyBJbmRleCBDU1MgSW1wb3J0XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vLyBKUyBJbXBvcnRzXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvYXBpLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBlZGl0QWNjb3VudE9wZW5CdG4sXHJcbiAgYWNjb3VudE5hbWUsXHJcbiAgYWNjb3VudFRpdGxlLFxyXG4gIGFjY291bnRGb3JtLFxyXG4gIHBvcHVwQWNjb3VudE5hbWUsXHJcbiAgYWNjb3VudE5hbWVJbnB1dCxcclxuICBhY2NvdW50VGl0bGVJbnB1dCxcclxuICBwb3B1cEFjY291bnRUaXRsZSxcclxuICBzdWJtaXRBY2NvdW50RWRpdCxcclxuICBwb3B1cEFkZFBsYWNlRm9ybSxcclxuICBhZGRQbGFjZXNPcGVuQnRuLFxyXG4gIHBvcHVwUGxhY2VOYW1lLFxyXG4gIHBvcHVwUGxhY2VVcmwsXHJcbiAgc3VibWl0TmV3UGxhY2UsXHJcbiAgcGxhY2VMaXN0LFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpICh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgYXV0aFRva2VuOiBcIjA5OTk4OWY3LTk3NDItNDZlZi05OWY4LWFhOGU2ODcyYTZjM1wiXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IG5ld1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgXHJcbiAgICBuYW1lU2VsZWN0b3I6IGFjY291bnROYW1lLCBcclxuICAgIGNhcmVlclNlbGVjdG9yOiBhY2NvdW50VGl0bGVcclxuICB9KTsgXHJcblxyXG4gIGFwaS5nZXRVc2VySW5mbygpLnRoZW4odXNlckRhdGEgPT4ge1xyXG4gICAgVXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lU2VsZWN0b3I6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIGNhcmVlclNlbGVjdG9yOiB1c2VyRGF0YS5hYm91dFxyXG4gICAgfSlcclxuICB9KTtcclxuXHJcbi8vIENhcmQgRnVuY3Rpb25zXHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmREYXRhKSA9PiB7IFxyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCggXHJcbiAgICBjYXJkRGF0YSwgXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICAoKSA9PiB7IFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2soY2FyZERhdGEpOyBcclxuICAgIH0sIFxyXG5cclxuICAgICgpID0+IHsgXHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpLmNoaWxkTm9kZXMubGVuZ3RoKSB7IFxyXG4gICAgICAgIGRvY3VtZW50IFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX25vLXBsYWNlc1wiKSBcclxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZHNfX25vLXBsYWNlc19hY3RpdmVcIik7IFxyXG4gICAgICB9IGVsc2UgeyBcclxuXHJcbiAgICAgICAgZG9jdW1lbnQgXHJcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbm8tcGxhY2VzXCIpIFxyXG4gICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkc19fbm8tcGxhY2VzX2FjdGl2ZVwiKTsgXHJcbiAgICAgIH0gXHJcbiAgICB9IFxyXG4gICk7IFxyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTsgXHJcbn07IFxyXG5cclxuIFxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKCBcclxuICB7IFxyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcywgXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7IFxyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTsgXHJcbiAgICB9LCBcclxuICB9LCBcclxuICBwbGFjZUxpc3QgXHJcbik7IFxyXG5cclxuXHJcblxyXG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiN2aWV3X19pbWFnZVwiKTsgXHJcblxyXG4gXHJcbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChpdGVtKSA9PiB7IFxyXG4gIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4oaXRlbS5uYW1lLCBpdGVtLmxpbmspOyBcclxufTtcclxuLy9DYXJkIFN1Ym1pdCBGb3JtXHJcbmNvbnN0IGFkZE5ld0NhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZFBsYWNlRm9ybSwgeyBcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4geyBcclxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7IFxyXG4gICAgYWRkTmV3Q2FyZC5jbG9zZSgpOyBcclxuICB9LCBcclxufSk7IFxyXG4gXHJcbmFkZFBsYWNlc09wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXHJcbiAgYWRkTmV3Q2FyZC5vcGVuKCk7IFxyXG4gIHBsYWNlc0Zvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IFxyXG59KTsgXHJcbi8vRWRpdCBTdWJtaXQgRm9ybVxyXG4gXHJcblxyXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oYWNjb3VudEZvcm0sIHsgXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHsgXHJcbiAgICBuZXdVc2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTsgXHJcbiAgICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7IFxyXG4gIH0sIFxyXG59KTsgXHJcblxyXG5lZGl0QWNjb3VudE9wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXHJcbiAgY29uc3Qge25hbWUsIG9jY3VwYXRpb259ID0gbmV3VXNlckluZm8uZ2V0VXNlckluZm8oKVxyXG4gIHBvcHVwQWNjb3VudE5hbWUudmFsdWUgPSBuYW1lO1xyXG4gIHBvcHVwQWNjb3VudFRpdGxlLnZhbHVlID0gb2NjdXBhdGlvbjtcclxuICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTsgXHJcbiAgYWNjb3VudEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IFxyXG59KTsgXHJcblxyXG5jb25zdCBhY2NvdW50Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBzdWJtaXRBY2NvdW50RWRpdFxyXG4pO1xyXG5cclxuY29uc3QgcGxhY2VzRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBzdWJtaXROZXdQbGFjZVxyXG4pO1xyXG5cclxuXHJcbmFwaS5nZXRDYXJkTGlzdCgpLnRoZW4oY2FyZHMgPT4ge1xyXG4gIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcclxufSBcclxuKTtcclxucGxhY2VzRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFjY291bnRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyBcclxucHJldmlld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbmFkZE5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgIiwiY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHtiYXNlVXJsLCBhdXRoVG9rZW59KSB7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xyXG4gICAgfVxyXG5cclxuXHJcbi8vIEdFVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzXHJcblxyXG4gICAgZ2V0Q2FyZExpc3QoKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjA5OTk4OWY3LTk3NDItNDZlZi05OWY4LWFhOGU2ODcyYTZjM1wiXHJcbiAgfVxyXG59KVxyXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBHRVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVxyXG4gZ2V0VXNlckluZm8oKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiBcIjA5OTk4OWY3LTk3NDItNDZlZi05OWY4LWFhOGU2ODcyYTZjM1wiXHJcbiAgICB9XHJcbiAgfSlcclxuICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIFBPU1QgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkc1xyXG4vLyBhZGRDYXJkKHtuYW1lLCBsaW5rfSkge1xyXG5cclxuLy8gfVxyXG5cclxuXHJcbi8vIERFTEVURSBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzL2NhcmRJZFxyXG4vLyByZW1vdmVDYXJkKGNhcmRJRCkge1xyXG5cclxuLy8gfVxyXG5cclxuLy8gLy8gUFVUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHMvbGlrZXMvY2FyZElkXHJcblxyXG4vLyAvLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkcy9saWtlcy9jYXJkSWRcclxuLy8gY2hhbmdlTGlrZUNhcmRTdGF0dXMoY2FyZElkLCBsaWtlKSB7fVxyXG5cclxuLy8gLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVxyXG4vLyBzZXRVc2VySW5mbygpIHt9XHJcblxyXG4vLyAvLyBQQVRDSCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL3VzZXJzL21lL2F2YXRhclxyXG4vLyBzZXRVc2VyQXZhdGFyZ2l0KCkge31cclxuXHJcblxyXG5cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTtcclxuIiwiY2xhc3MgQ2FyZCB7IFxyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7IFxyXG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7IFxyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTsgXHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rOyBcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjsgXHJcbiAgfSBcclxuIFxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2dCkgPT4geyBcclxuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX3BsYWNlLWZhdm9yaXRlX2FjdGl2ZVwiKTsgXHJcbiAgfTsgXHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24gPSAoKSA9PiB7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsOyBcclxuICB9OyBcclxuLy9ydW5zIDNyZCBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3BsYWNlLWZhdm9yaXRlXCIpIFxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pOyBcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIilcclxuICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKHRoaXMuX2NhcmRFbGVtZW50KTsgXHJcbiAgICB9KTsgXHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpIFxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOnRoaXMuX2xpbmssIG5hbWU6dGhpcy5fbmFtZX0pOyBcclxuICAgICAgfSk7IFxyXG4gIH0gXHJcbi8vcnVucyAybmQgXHJcbiAgX2dldFRlbXBsYXRlKCkgeyBcclxuICAgIHJldHVybiBkb2N1bWVudCBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKSBcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpOyBcclxuICB9IFxyXG5cclxuLy9ydW5zIDFzdCBcclxuXHJcblxyXG5cclxuZ2V0VmlldygpIHsgXHJcbiAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpOyBcclxuICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3BsYWNlLW5hbWVcIikudGV4dENvbnRlbnQgPSBcclxuICAgIHRoaXMuX25hbWU7IFxyXG4gIGNvbnN0IHBob3RvRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7IFxyXG4gIHBob3RvRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rOyBcclxuICBwaG90b0VsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTsgXHJcbiAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbiAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50OyBcclxufVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IFxyXG5cclxuICIsImNsYXNzIFNlY3Rpb24ge1xyXG4gXHJcblxyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikgeyBcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtczsgXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyBcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjsgXHJcbiAgfSBcclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7IFxyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7IFxyXG4gIH0gXHJcblxyXG4gIHJlbmRlckl0ZW1zKCkgeyBcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4geyBcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcbn0gXHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiAiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjsgXHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHsgXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcikgeyBcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyBcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXByZXZpZXdcIik7IFxyXG4gIH0gXHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykgeyBcclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRJbWFnZTsgXHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gbGluazsgXHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTsgXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBcclxuICAgICAgXCIucG9wdXBfX3ByZXZpZXctbmFtZVwiIFxyXG4gICAgKS50ZXh0Q29udGVudCA9IG5hbWU7IFxyXG4gICAgc3VwZXIub3BlbigpOyBcclxuICB9IFxyXG59IFxyXG5cclxuIFxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7ICJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ3bnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc2F2ZUJ1dHRvbiIsIl9zYXZlQnV0dG9uVGV4dCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiX29iakRhdGEiLCJpbnB1dCIsIm5hbWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJfb2JqSW5wdXQiLCJjb25zb2xlIiwibG9nIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImNhcmVlclNlbGVjdG9yIiwiX25hbWUiLCJfY2FyZWVyIiwiZ2V0VXNlckluZm8iLCJvY2N1cGF0aW9uIiwic2V0VXNlckluZm8iLCJlZGl0QWNjb3VudE9wZW5CdG4iLCJwb3B1cEFjY291bnROYW1lIiwicG9wdXBBY2NvdW50VGl0bGUiLCJzdWJtaXRBY2NvdW50RWRpdCIsImFkZFBsYWNlc09wZW5CdG4iLCJzdWJtaXROZXdQbGFjZSIsInBsYWNlTGlzdCIsImFwaSIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJfYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJnZXRDYXJkTGlzdCIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwianNvbiIsInJlc3VsdCIsImNhdGNoIiwiZXJyIiwibmV3VXNlckluZm8iLCJ1c2VyRGF0YSIsImFib3V0IiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImdldFZpZXciLCJwaG90b0VsZW1lbnQiLCJzcmMiLCJhbHQiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwiY2FyZExpc3QiLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJpdGVtIiwicHJldmlld0ltYWdlUG9wdXAiLCJfY2FyZEltYWdlIiwiaW1hZ2VFbGVtZW50IiwiYWRkTmV3Q2FyZCIsIlBvcHVwV2l0aEZvcm0iLCJwbGFjZXNGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1Qb3B1cCIsImFjY291bnRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImNhcmRzIl0sInNvdXJjZVJvb3QiOiIifQ==