!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}enableValidation(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnRemoteClick=this._closePopupOnRemoteClick.bind(this)}open(){this._popup.classList.add("popup_open"),this._popup.addEventListener("mousedown",this._closePopupOnRemoteClick),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._closePopupOnRemoteClick)}_closePopupOnRemoteClick(e){e.target.classList.contains("popup__overlay")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close-btn").addEventListener("click",(()=>this.close()))}}var o=class extends s{constructor(e,t){let{handleFormSubmit:s}=t;super(e),this._form=this._popup.querySelector(".popup__form"),this._handleFormSubmit=s,this._inputList=this._form.querySelectorAll(".popup__form-input"),this._saveButton=this._form.querySelector(".popup__button"),this._saveButtonText=this._saveButton.value}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){return this._objData={},this._inputList.forEach((e=>{this._objData[e.name]=e.value})),this._objData}setInputValues(e){this._objInput={},this._inputList.forEach((t=>{console.log(e),this._objInput[t.name]=e[t.value]}))}renderSaving(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._loadingButtonText;this._submitButton.textContent=e?t:this._submitButtonText}close(){super.close(),this._form.reset()}open(){super.open(),this._saveButton.value=this._saveButtonText}};const n=document.querySelector(".account__edit-button"),r=(document.querySelector(".account__name"),document.querySelector(".account__description"),document.querySelector(".popup__edit-close"),document.querySelector(".popup__account-name")),i=document.querySelector(".popup__account-description"),a=document.querySelector(".popup__edit-form"),c=document.querySelector(".account__add-button"),l=(document.querySelector(".popup__place-close-btn"),document.querySelector(".popup__place-name"),document.querySelector(".popup__place-link"),document.querySelector(".popup__place-form")),u=document.querySelector(".cards__list"),_={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-type-error",errorClass:"popup__error_visible"},p=new class{constructor(e){let{baseUrl:t,authToken:s,name:o,about:n}=e;this._baseUrl=t,this._authToken=s,this._name=o,this._about=n}async getCardList(){try{const e=await fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}}),t=await e.json();console.log(t)}catch(e){console.log(e)}}async getUserInfo(){try{const e=await fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}}),t=await e.json();console.log(t)}catch(e){console.log(e)}}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}),d=e=>new class{constructor(e,s,o){t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__place-favorite_active")})),t(this,"_handleDeleteButton",(()=>{this._cardElement.remove(),this._cardElement=null})),this.handleCardClick=o,this._name=e.name,this._link=e.link,this._cardSelector=s}_setEventListeners(){this._cardElement.querySelector(".card__place-favorite").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__trash").addEventListener("click",(()=>{this._handleDeleteButton(this._cardElement)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this.handleCardClick({link:this._link,name:this._name})}))}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}getView(){this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__place-name").textContent=this._name;const e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._setEventListeners(),this._cardElement}}(e,"#card-template",(()=>{v(e)}),(()=>{document.querySelector(".cards__list").childNodes.length?document.querySelector(".cards__no-places").classList.remove("cards__no-places_active"):document.querySelector(".cards__no-places").classList.add("cards__no-places_active")})).getView(),h=new class{constructor(e,t){let{items:s,renderer:o}=e;this._renderedItems=s,this._renderer=o,this._container=t}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach(this._renderer)}}({renderer:e=>{const t=d(e);h.addItem(t)}},u),m=new class extends s{constructor(e){super(e),this._cardImage=document.querySelector(".popup__image-preview")}open(e,t){const s=this._cardImage;s.src=t,s.alt=e,document.querySelector(".popup__preview-name").textContent=e,super.open()}}("#view__image"),v=e=>{m.open(e.name,e.link)},E=new o("#add__place",{handleFormSubmit:e=>{h.addItem(d(e)),E.close()}});c.addEventListener("click",(()=>{E.open(),b.resetValidation()}));const S=new o("#account__edit",{handleFormSubmit:e=>{newUserInfo.setUserInfo(e),S.close()}});n.addEventListener("click",(()=>{const{name:e,occupation:t}=newUserInfo.getUserInfo();r.value=e,i.value=t,S.open(),f.resetValidation()}));const f=new e(_,a),b=new e(_,l);p.getCardList().then((e=>{h.renderItems(e)})),b.enableValidation(),f.enableValidation(),S.setEventListeners(),m.setEventListeners(),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBbUJXLElBQ2pCc0QsRUFBU08sUUFBUTVCLEVBQVdqQyxJQUM1QnNFLEVBQVd4RixPQUFYLElBSUppQyxFQUFpQi9DLGlCQUFpQixTQUFTLEtBQ3pDc0csRUFBV3pGLE9BQ1gyRixFQUFvQm5HLGlCQUFwQixJQUtGLE1BQU1vRyxFQUFnQixJQUFJRixFRHJHQyxpQkNxRzBCLENBQ25EbEYsaUJBQW1CVyxJQUNqQjBFLFlBQVlDLFlBQVkzRSxHQUN4QnlFLEVBQWMzRixPQUFkLElBSUo2QixFQUFtQjNDLGlCQUFpQixTQUFTLEtBQzNDLE1BQU0sS0FBQzhCLEVBQUQsV0FBTzhFLEdBQWNGLFlBQVlHLGNBQ3ZDakUsRUFBaUJsQixNQUFRSSxFQUN6QmUsRUFBa0JuQixNQUFRa0YsRUFDMUJILEVBQWM1RixPQUNkaUcsRUFBcUJ6RyxpQkFBckIsSUFHRixNQUFNeUcsRUFBdUIsSUFBSUMsRUFDL0J0SixFQUNBcUYsR0FHSTBELEVBQXNCLElBQUlPLEVBQzlCdEosRUFDQXVGLEdBSUZFLEVBQUk4RCxjQUFjQyxNQUFLQyxJQUNyQjVCLEVBQVNVLFlBQVlrQixFQUFyQixJQUdGVixFQUFvQnRHLG1CQUNwQjRHLEVBQXFCNUcsbUJBQ3JCdUcsRUFBY3JGLG9CQUNkOEUsRUFBa0I5RSxvQkFDbEJrRixFQUFXbEYsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG5cclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHsgXHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4geyBcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2d250KSB7XHJcbiAgICAgIGV2d250LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkgeyBcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHsgXHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcbiAgXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHsgXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcikgeyBcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7IFxyXG4gICAgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2sgPSB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljay5iaW5kKHRoaXMpOyBcclxuICB9IFxyXG4gXHJcbiAgb3BlbigpIHsgXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTsgXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKTsgXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7IFxyXG4gIH0gXHJcbiBcclxuICBjbG9zZSgpIHsgXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTsgXHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7IFxyXG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7IFxyXG4gIH0gXHJcbiBcclxuICBfY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2soZXZ0KSB7IFxyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX292ZXJsYXlcIikpIHsgXHJcbiAgICAgIHRoaXMuY2xvc2UoKTsgXHJcbiAgICB9IFxyXG4gIH0gXHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHsgXHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikgeyBcclxuICAgICAgdGhpcy5jbG9zZSgpOyBcclxuICAgIH0gXHJcbiAgfSBcclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cCBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKSBcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpOyBcclxuICB9IFxyXG59ICIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiOyBcclxuXHJcbiBcclxuIGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7IFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7IFxyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IFxyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7IFxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7IFxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3JtLWlucHV0XCIpOyBcclxuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTsgXHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uVGV4dCA9IHRoaXMuX3NhdmVCdXR0b24udmFsdWU7XHJcbiAgfVxyXG4gXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4geyBcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IFxyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpOyBcclxuICAgfSk7IFxyXG4gIH0gXHJcbiAgXHJcbiAgX2dldElucHV0VmFsdWVzKCkgeyBcclxuICAgIHRoaXMuX29iakRhdGEgPSB7fTsgXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHsgXHJcbiAgICAgIHRoaXMuX29iakRhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTsgXHJcbiAgICB9KTsgXHJcbiAgICByZXR1cm4gdGhpcy5fb2JqRGF0YTsgXHJcbiAgfSBcclxuIFxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHsgXHJcbiAgICB0aGlzLl9vYmpJbnB1dCA9IHt9OyBcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4geyBcclxuICAgICAgY29uc29sZS5sb2coZGF0YSk7IFxyXG4gICAgICB0aGlzLl9vYmpJbnB1dFtpbnB1dC5uYW1lXSA9IGRhdGFbaW5wdXQudmFsdWVdOyBcclxuICAgIH0pOyBcclxuICB9IFxyXG5cclxuICByZW5kZXJTYXZpbmcoaXNTYXZpbmcsIGxvYWRpbmdUZXh0ID0gdGhpcy5fbG9hZGluZ0J1dHRvblRleHQpIHtcclxuICAgIGlmIChpc1NhdmluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHsgXHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpOyBcclxuICB9IFxyXG5cclxuICBvcGVuKCkgeyBcclxuICAgIHN1cGVyLm9wZW4oKTsgXHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uLnZhbHVlID0gdGhpcy5fc2F2ZUJ1dHRvblRleHQ7IFxyXG4gIH0gXHJcbn0gXHJcblxyXG4gXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiLy9BY2NvdW50IGFuZCBQbGFjZSBTZWN0aW9uc1xyXG5leHBvcnQgY29uc3QgZWRpdEFjY291bnRPcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5hY2NvdW50X19lZGl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgYWNjb3VudE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3VudF9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFjY291bnRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFjY291bnROYW1lID0gXCIuYWNjb3VudF9fbmFtZVwiO1xyXG5leHBvcnQgY29uc3QgYWNjb3VudFRpdGxlID0gXHJcbiAgXCIuYWNjb3VudF9fZGVzY3JpcHRpb25cIlxyXG47XHJcbmV4cG9ydCBjb25zdCBhY2NvdW50Rm9ybSA9IFwiI2FjY291bnRfX2VkaXRcIjtcclxuZXhwb3J0IGNvbnN0IGVkaXRBY2NvdW50Q2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lZGl0LWNsb3NlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBY2NvdW50TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2FjY291bnQtbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWNjb3VudFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fYWNjb3VudC1kZXNjcmlwdGlvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBzdWJtaXRBY2NvdW50RWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2VkaXQtZm9ybVwiKTtcclxuXHJcbi8vIFBvcHVwIFNlY3Rpb25zXHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZFBsYWNlRm9ybSA9IFwiI2FkZF9fcGxhY2VcIjtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlc09wZW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY291bnRfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fcGxhY2UtY2xvc2UtYnRuXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGxhY2UtbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1saW5rXCIpO1xyXG5leHBvcnQgY29uc3Qgc3VibWl0TmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1mb3JtXCIpO1xyXG5cclxuLy8gQ2FyZHMgTGlzdFxyXG5leHBvcnQgY29uc3QgcGxhY2VMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbi8vIFBsYWNlIENhcmRzXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJSZWFjaGluZyBmb3IgdGhlIE1vb25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC84OC85Yi8zNi84ODliMzYwN2IyYjkzNDMwYjQwZDdmMDNhZTkxOGU4ZC5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiUG9ydHJhaXQgb2YgQmFyYmFyYSBvZiBQb3J0dWdhbFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzhhL2EwLzcwLzhhYTA3MDUzMTc4Y2IxYmJiNGEzZjkzMzc5ZDc1MGQyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTaW1lcmVueWFcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC80Ni82Ni8zMC80NjY2MzA1MGUzODg1NTBiZjI0YjgwODYxNzk2MjcxZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQ3VwaWQgYW5kIFBzeWNoZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzE2L2UyLzhiLzE2ZTI4YmJiNDg4MDg1Y2Y1ZGY2OWY2MmMwNzc5MWNiLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTdHJlZXQgaW4gdGhlIEV2ZW5pbmcsIFByYWd1ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2ZlLzg1LzNiL2ZlODUzYjEyZWU1MjkwYTRiMDk2N2VjNmUyMGRlNzgyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHaXJsIGF0IHRoZSBQaWFub1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2Q3LzBiLzUzL2Q3MGI1MzQ3OTFmNTBmNjJlNzQxNjY5YWVjZDdhNDc5LmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHb2luZyBIb21lXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvYWQvNTMvMmIvYWQ1MzJiMzFiYmZjZDAwNmM2YjhmMzNhOWI0Y2ViZjMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlJhaW55IE5pZ2h0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvMWEvNTAvMzIvMWE1MDMyMWI5MDViNWRkZDYwYjI4MDJjMWI1MGFkNGIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlRoZSBTcHJlYWRpbmcgVHJlZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2Q2L2IyL2Y5L2Q2YjJmOTQ2NTc5N2M0YWRlYzVmY2E2NDFhMWRkMmQ4LmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBWYWxpZGF0b3JzXHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC10eXBlLWVycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCIvLyBJbmRleCBDU1MgSW1wb3J0XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vLyBKUyBJbXBvcnRzXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgcG9wdXBXaXRoVmVyaWZpY2F0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aFZlcmlmaWNhdGlvbi5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvYXBpLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBlZGl0QWNjb3VudE9wZW5CdG4sXHJcbiAgYWNjb3VudE5hbWUsXHJcbiAgYWNjb3VudFRpdGxlLFxyXG4gIGFjY291bnRGb3JtLFxyXG4gIHBvcHVwQWNjb3VudE5hbWUsXHJcbiAgYWNjb3VudE5hbWVJbnB1dCxcclxuICBhY2NvdW50VGl0bGVJbnB1dCxcclxuICBwb3B1cEFjY291bnRUaXRsZSxcclxuICBzdWJtaXRBY2NvdW50RWRpdCxcclxuICBwb3B1cEFkZFBsYWNlRm9ybSxcclxuICBhZGRQbGFjZXNPcGVuQnRuLFxyXG4gIHBvcHVwUGxhY2VOYW1lLFxyXG4gIHBvcHVwUGxhY2VVcmwsXHJcbiAgc3VibWl0TmV3UGxhY2UsXHJcbiAgcGxhY2VMaXN0LFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpICh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgYXV0aFRva2VuOiBcIjA5OTk4OWY3LTk3NDItNDZlZi05OWY4LWFhOGU2ODcyYTZjM1wiXHJcbiAgfSk7XHJcblxyXG4gIC8qXHJcblxyXG4gIGNvbnN0IG5ld1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgXHJcbiAgICBuYW1lU2VsZWN0b3I6IGFjY291bnROYW1lLCBcclxuICAgIGNhcmVlclNlbGVjdG9yOiBhY2NvdW50VGl0bGVcclxuICB9KTsgXHJcblxyXG4gIGFwaS5nZXRVc2VySW5mbygpLnRoZW4odXNlckRhdGEgPT4ge1xyXG4gICAgVXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICBvY2N1cGF0aW9uOiB1c2VyRGF0YS5hYm91dFxyXG4gICAgfSlcclxuICB9KTtcclxuKi9cclxuLy8gQ2FyZCBGdW5jdGlvbnNcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEpID0+IHsgXHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKCBcclxuICAgIGNhcmREYXRhLCBcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgICgpID0+IHsgXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljayhjYXJkRGF0YSk7IFxyXG4gICAgfSwgXHJcblxyXG4gICAgKCkgPT4geyBcclxuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIikuY2hpbGROb2Rlcy5sZW5ndGgpIHsgXHJcbiAgICAgICAgZG9jdW1lbnQgXHJcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbm8tcGxhY2VzXCIpIFxyXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkc19fbm8tcGxhY2VzX2FjdGl2ZVwiKTsgXHJcbiAgICAgIH0gZWxzZSB7IFxyXG5cclxuICAgICAgICBkb2N1bWVudCBcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19uby1wbGFjZXNcIikgXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LmFkZChcImNhcmRzX19uby1wbGFjZXNfYWN0aXZlXCIpOyBcclxuICAgICAgfSBcclxuICAgIH0gXHJcbiAgKTsgXHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpOyBcclxufTsgXHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gY2FyZERhdGEgPT4ge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn07XHJcbiBcclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZFxyXG4gIH0sXHJcbiAgcGxhY2VMaXN0XHJcbik7XHJcblxyXG5cclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ZpZXdfX2ltYWdlXCIpOyBcclxuXHJcbiBcclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGl0ZW0pID0+IHsgXHJcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbihpdGVtLm5hbWUsIGl0ZW0ubGluayk7IFxyXG59O1xyXG4vL0NhcmQgU3VibWl0IEZvcm1cclxuY29uc3QgYWRkTmV3Q2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkUGxhY2VGb3JtLCB7IFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7IFxyXG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTsgXHJcbiAgICBhZGROZXdDYXJkLmNsb3NlKCk7IFxyXG4gIH0sIFxyXG59KTsgXHJcbiBcclxuYWRkUGxhY2VzT3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcclxuICBhZGROZXdDYXJkLm9wZW4oKTsgXHJcbiAgcGxhY2VzRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTsgXHJcbn0pOyBcclxuLy9FZGl0IFN1Ym1pdCBGb3JtXHJcbiBcclxuXHJcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShhY2NvdW50Rm9ybSwgeyBcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4geyBcclxuICAgIG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpOyBcclxuICAgIGVkaXRGb3JtUG9wdXAuY2xvc2UoKTsgXHJcbiAgfSwgXHJcbn0pOyBcclxuXHJcbmVkaXRBY2NvdW50T3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcclxuICBjb25zdCB7bmFtZSwgb2NjdXBhdGlvbn0gPSBuZXdVc2VySW5mby5nZXRVc2VySW5mbygpXHJcbiAgcG9wdXBBY2NvdW50TmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgcG9wdXBBY2NvdW50VGl0bGUudmFsdWUgPSBvY2N1cGF0aW9uO1xyXG4gIGVkaXRGb3JtUG9wdXAub3BlbigpOyBcclxuICBhY2NvdW50Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTsgXHJcbn0pOyBcclxuXHJcbmNvbnN0IGFjY291bnRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHN1Ym1pdEFjY291bnRFZGl0XHJcbik7XHJcblxyXG5jb25zdCBwbGFjZXNGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHN1Ym1pdE5ld1BsYWNlXHJcbik7XHJcblxyXG5cclxuYXBpLmdldENhcmRMaXN0KCkudGhlbihjYXJkcyA9PiB7XHJcbiAgY2FyZExpc3QucmVuZGVySXRlbXMoY2FyZHMpO1xyXG59IFxyXG4pO1xyXG5wbGFjZXNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWNjb3VudEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5lZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyBcclxuYWRkTmV3Q2FyZC5zZXRFdmVudExpc3RlbmVycygpOyAiLCJjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGF1dGhUb2tlbiwgbmFtZSwgYWJvdXR9KSB7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XHJcbiAgICB9XHJcblxyXG5cclxuLy8gR0VUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcclxuXHJcbiAgICBhc3luYyBnZXRDYXJkTGlzdCgpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwOTk5ODlmNy05NzQyLTQ2ZWYtOTlmOC1hYThlNjg3MmE2YzNcIlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdF8xID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRfMSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICAgICAgfVxyXG59XHJcblxyXG4vLyBHRVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVxyXG4gYXN5bmMgZ2V0VXNlckluZm8oKSB7XHJcbiAgdHJ5IHtcclxuICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwOTk5ODlmNy05NzQyLTQ2ZWYtOTlmOC1hYThlNjg3MmE2YzNcIlxyXG4gICAgICAgfVxyXG4gICAgIH0pO1xyXG4gICAgIGNvbnN0IHJlc3VsdF8xID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICBjb25zb2xlLmxvZyhyZXN1bHRfMSk7XHJcbiAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vIFBPU1QgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkc1xyXG4vLyBhZGRDYXJkKHtuYW1lLCBsaW5rfSkge1xyXG5cclxuLy8gfVxyXG5cclxuXHJcbi8vIERFTEVURSBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzL2NhcmRJZFxyXG4vLyByZW1vdmVDYXJkKGNhcmRJRCkge1xyXG5cclxuLy8gfVxyXG5cclxuLy8gLy8gUFVUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHMvbGlrZXMvY2FyZElkXHJcblxyXG4vLyAvLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkcy9saWtlcy9jYXJkSWRcclxuLy8gY2hhbmdlTGlrZUNhcmRTdGF0dXMoY2FyZElkLCBsaWtlKSB7fVxyXG5cclxuLy8gLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVxyXG4vLyBzZXRVc2VySW5mbygpIHt9XHJcblxyXG4vLyAvLyBQQVRDSCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL3VzZXJzL21lL2F2YXRhclxyXG4vLyBzZXRVc2VyQXZhdGFyZ2l0KCkge31cclxuXHJcblxyXG5cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTtcclxuIiwiY2xhc3MgQ2FyZCB7IFxyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7IFxyXG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7IFxyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTsgXHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rOyBcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjsgXHJcbiAgfSBcclxuIFxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2dCkgPT4geyBcclxuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX3BsYWNlLWZhdm9yaXRlX2FjdGl2ZVwiKTsgXHJcbiAgfTsgXHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24gPSAoKSA9PiB7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsOyBcclxuICB9OyBcclxuLy9ydW5zIDNyZCBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3BsYWNlLWZhdm9yaXRlXCIpIFxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pOyBcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIilcclxuICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKHRoaXMuX2NhcmRFbGVtZW50KTsgXHJcbiAgICB9KTsgXHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpIFxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOnRoaXMuX2xpbmssIG5hbWU6dGhpcy5fbmFtZX0pOyBcclxuICAgICAgfSk7IFxyXG4gIH0gXHJcbi8vcnVucyAybmQgXHJcbiAgX2dldFRlbXBsYXRlKCkgeyBcclxuICAgIHJldHVybiBkb2N1bWVudCBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKSBcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpOyBcclxuICB9IFxyXG5cclxuLy9ydW5zIDFzdCBcclxuXHJcblxyXG5cclxuZ2V0VmlldygpIHsgXHJcbiAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpOyBcclxuICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3BsYWNlLW5hbWVcIikudGV4dENvbnRlbnQgPSBcclxuICAgIHRoaXMuX25hbWU7IFxyXG4gIGNvbnN0IHBob3RvRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7IFxyXG4gIHBob3RvRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rOyBcclxuICBwaG90b0VsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTsgXHJcbiAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbiAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50OyBcclxufVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IFxyXG5cclxuICIsImNsYXNzIFNlY3Rpb24ge1xyXG4gXHJcblxyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikgeyBcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtczsgXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyBcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjsgXHJcbiAgfSBcclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7IFxyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7IFxyXG4gIH0gXHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcclxuICB9XHJcbn0gXHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiAiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjsgXHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHsgXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcikgeyBcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyBcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXByZXZpZXdcIik7IFxyXG4gIH0gXHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykgeyBcclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRJbWFnZTsgXHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gbGluazsgXHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTsgXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBcclxuICAgICAgXCIucG9wdXBfX3ByZXZpZXctbmFtZVwiIFxyXG4gICAgKS50ZXh0Q29udGVudCA9IG5hbWU7IFxyXG4gICAgc3VwZXIub3BlbigpOyBcclxuICB9IFxyXG59IFxyXG5cclxuIFxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7ICJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ3bnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc2F2ZUJ1dHRvbiIsIl9zYXZlQnV0dG9uVGV4dCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiX29iakRhdGEiLCJpbnB1dCIsIm5hbWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJfb2JqSW5wdXQiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyU2F2aW5nIiwiaXNTYXZpbmciLCJsb2FkaW5nVGV4dCIsIl9sb2FkaW5nQnV0dG9uVGV4dCIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsInJlc2V0IiwiZWRpdEFjY291bnRPcGVuQnRuIiwicG9wdXBBY2NvdW50TmFtZSIsInBvcHVwQWNjb3VudFRpdGxlIiwic3VibWl0QWNjb3VudEVkaXQiLCJhZGRQbGFjZXNPcGVuQnRuIiwic3VibWl0TmV3UGxhY2UiLCJwbGFjZUxpc3QiLCJhcGkiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiYWJvdXQiLCJfYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJfbmFtZSIsIl9hYm91dCIsInJlcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXN1bHRfMSIsImpzb24iLCJlcnIiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsInBob3RvRWxlbWVudCIsInNyYyIsImFsdCIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJjYXJkTGlzdCIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImNhcmRFbGVtZW50IiwicHJldmlld0ltYWdlUG9wdXAiLCJfY2FyZEltYWdlIiwiaW1hZ2VFbGVtZW50IiwiaXRlbSIsImFkZE5ld0NhcmQiLCJQb3B1cFdpdGhGb3JtIiwicGxhY2VzRm9ybVZhbGlkYXRvciIsImVkaXRGb3JtUG9wdXAiLCJuZXdVc2VySW5mbyIsInNldFVzZXJJbmZvIiwib2NjdXBhdGlvbiIsImdldFVzZXJJbmZvIiwiYWNjb3VudEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiZ2V0Q2FyZExpc3QiLCJ0aGVuIiwiY2FyZHMiXSwic291cmNlUm9vdCI6IiJ9