!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e,t){const n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}enableValidation(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class n{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnRemoteClick=this._closePopupOnRemoteClick.bind(this)}open(){this._popup.classList.add("popup_open"),this._popup.addEventListener("mousedown",this._closePopupOnRemoteClick),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._closePopupOnRemoteClick)}_closePopupOnRemoteClick(e){e.target.classList.contains("popup__overlay")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close-btn").addEventListener("click",(()=>this.close()))}}var s=class extends n{constructor(e,t){let{handleFormSubmit:n}=t;super(e),this._form=this._popup.querySelector(".popup__form"),this._handleFormSubmit=n,this._inputList=this._form.querySelectorAll(".popup__form-input"),this._saveButton=this._form.querySelector(".popup__button"),this._saveButtonText=this._saveButton.value}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){return this._objData={},this._inputList.forEach((e=>{this._objData[e.name]=e.value})),this._objData}setInputValues(e){this._objInput={},this._inputList.forEach((t=>{console.log(e),this._objInput[t.name]=e[t.value]}))}close(){super.close(),this._form.reset()}open(){super.open(),this._saveButton.value=this._saveButtonText}};class o{constructor(e){let{nameSelector:t,careerSelector:n}=e;this._name=document.querySelector(t),this._career=document.querySelector(n)}getUserInfo(){return{name:this._name.textContent,occupation:this._career.textContent}}setUserInfo(e){this._name.textContent=e.name,this._career.textContent=e.occupation}}const r=document.querySelector(".account__edit-button"),i=(document.querySelector(".account__name"),document.querySelector(".account__description"),document.querySelector(".popup__edit-close"),document.querySelector(".popup__account-name")),a=document.querySelector(".popup__account-description"),c=document.querySelector(".popup__edit-form"),l=document.querySelector(".account__add-button"),u=(document.querySelector(".popup__place-close-btn"),document.querySelector(".popup__place-name"),document.querySelector(".popup__place-link"),document.querySelector(".popup__place-form")),_=document.querySelector(".cards__list"),p={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-type-error",errorClass:"popup__error_visible"},d=new class{constructor(e){let{baseUrl:t,authToken:n}=e;this._baseUrl=t,this._authToken=n}getCardList(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"099989f7-9742-46ef-99f8-aa8e6872a6c3"}),h=new o({nameSelector:".account__name",careerSelector:".account__description"});d.getUserInfo().then((e=>{o.setUserInfo({name:e.name,occupation:e.about})}));const m=e=>new class{constructor(e,n,s){t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__place-favorite_active")})),t(this,"_handleDeleteButton",(()=>{this._cardElement.remove(),this._cardElement=null})),this.handleCardClick=s,this._name=e.name,this._link=e.link,this._cardSelector=n}_setEventListeners(){this._cardElement.querySelector(".card__place-favorite").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__trash").addEventListener("click",(()=>{this._handleDeleteButton(this._cardElement)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this.handleCardClick({link:this._link,name:this._name})}))}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}getView(){this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__place-name").textContent=this._name;const e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._setEventListeners(),this._cardElement}}(e,"#card-template",(()=>{v(e)}),(()=>{document.querySelector(".cards__list").childNodes.length?document.querySelector(".cards__no-places").classList.remove("cards__no-places_active"):document.querySelector(".cards__no-places").classList.add("cards__no-places_active")})).getView(),b=new class{constructor(e,t){let{items:n,renderer:s}=e;this._renderedItems=n,this._renderer=s,this._container=t}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Reaching for the Moon",link:"https://i.pinimg.com/564x/88/9b/36/889b3607b2b93430b40d7f03ae918e8d.jpg"},{name:"Portrait of Barbara of Portugal",link:"https://i.pinimg.com/564x/8a/a0/70/8aa07053178cb1bbb4a3f93379d750d2.jpg"},{name:"Simerenya",link:"https://i.pinimg.com/564x/46/66/30/46663050e388550bf24b80861796271e.jpg"},{name:"Cupid and Psyche",link:"https://i.pinimg.com/564x/16/e2/8b/16e28bbb488085cf5df69f62c07791cb.jpg"},{name:"Street in the Evening, Prague",link:"https://i.pinimg.com/564x/fe/85/3b/fe853b12ee5290a4b0967ec6e20de782.jpg"},{name:"Girl at the Piano",link:"https://i.pinimg.com/564x/d7/0b/53/d70b534791f50f62e741669aecd7a479.jpg"},{name:"Going Home",link:"https://i.pinimg.com/564x/ad/53/2b/ad532b31bbfcd006c6b8f33a9b4cebf3.jpg"},{name:"Rainy Night",link:"https://i.pinimg.com/564x/1a/50/32/1a50321b905b5ddd60b2802c1b50ad4b.jpg"},{name:"The Spreading Tree",link:"https://i.pinimg.com/564x/d6/b2/f9/d6b2f9465797c4adec5fca641a1dd2d8.jpg"}],renderer:e=>{b.addItem(m(e))}},_),f=new class extends n{constructor(e){super(e),this._cardImage=document.querySelector(".popup__image-preview")}open(e,t){const n=this._cardImage;n.src=t,n.alt=e,document.querySelector(".popup__preview-name").textContent=e,super.open()}}("#view__image"),v=e=>{f.open(e.name,e.link)},g=new s("#add__place",{handleFormSubmit:e=>{b.addItem(m(e)),g.close()}});l.addEventListener("click",(()=>{g.open(),y.resetValidation()}));const S=new s("#account__edit",{handleFormSubmit:e=>{h.setUserInfo(e),S.close()}});r.addEventListener("click",(()=>{const{name:e,occupation:t}=h.getUserInfo();i.value=e,a.value=t,S.open(),E.resetValidation()}));const E=new e(p,c),y=new e(p,u);d.getCardList().then((e=>{b.renderItems(e)})),y.enableValidation(),E.enableValidation(),S.setEventListeners(),f.setEventListeners(),g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBUWlCLEVBQzFCa0UsRUFBY2hHLE9BQ2RpRyxFQUFxQnpHLGlCQUFyQixJQUdGLE1BQU15RyxFQUF1QixJQUFJQyxFQUMvQnRKLEVBQ0F1RixHQUdJNEQsRUFBc0IsSUFBSUcsRUFDOUJ0SixFQUNBeUYsR0FJRkUsRUFBSUssY0FBY0ksTUFBS21ELElBQ3JCckIsRUFBU1UsWUFBWVcsRUFBckIsSUFHRkosRUFBb0IxRyxtQkFDcEI0RyxFQUFxQjVHLG1CQUNyQjJHLEVBQWN6RixvQkFDZG1GLEVBQWtCbkYsb0JBQ2xCc0YsRUFBV3RGLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkgeyBcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7IFxyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDsgXHJcbiAgICB9KTsgXHJcbiAgfSBcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ3bnQpIHtcclxuICAgICAgZXZ3bnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7IFxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTsgXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4geyBcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTsgXHJcbiAgICB9KTsgXHJcbiAgfSBcclxuICBcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAgeyBcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7IFxyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpOyBcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTsgXHJcbiAgICB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayA9IHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrLmJpbmQodGhpcyk7IFxyXG4gIH0gXHJcbiBcclxuICBvcGVuKCkgeyBcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpOyBcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2spOyBcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTsgXHJcbiAgfSBcclxuIFxyXG4gIGNsb3NlKCkgeyBcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpOyBcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTsgXHJcbiAgICB0aGlzLl9wb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKTsgXHJcbiAgfSBcclxuIFxyXG4gIF9jbG9zZVBvcHVwT25SZW1vdGVDbGljayhldnQpIHsgXHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fb3ZlcmxheVwiKSkgeyBcclxuICAgICAgdGhpcy5jbG9zZSgpOyBcclxuICAgIH0gXHJcbiAgfSBcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkgeyBcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7IFxyXG4gICAgICB0aGlzLmNsb3NlKCk7IFxyXG4gICAgfSBcclxuICB9IFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkgeyBcclxuICAgIHRoaXMuX3BvcHVwIFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnRuXCIpIFxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7IFxyXG4gIH0gXHJcbn0gIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7IFxyXG5cclxuIFxyXG4gY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHsgXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBoYW5kbGVGb3JtU3VibWl0IH0pIHsgXHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTsgXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDsgXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIik7IFxyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpOyBcclxuICAgIHRoaXMuX3NhdmVCdXR0b25UZXh0ID0gdGhpcy5fc2F2ZUJ1dHRvbi52YWx1ZTtcclxuICB9XHJcbiBcclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpOyBcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7IFxyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTsgXHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IFxyXG4gICB9KTsgXHJcbiAgfSBcclxuICBcclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7IFxyXG4gICAgdGhpcy5fb2JqRGF0YSA9IHt9OyBcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4geyBcclxuICAgICAgdGhpcy5fb2JqRGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlOyBcclxuICAgIH0pOyBcclxuICAgIHJldHVybiB0aGlzLl9vYmpEYXRhOyBcclxuICB9IFxyXG4gXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkgeyBcclxuICAgIHRoaXMuX29iaklucHV0ID0ge307IFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7IFxyXG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTsgXHJcbiAgICAgIHRoaXMuX29iaklucHV0W2lucHV0Lm5hbWVdID0gZGF0YVtpbnB1dC52YWx1ZV07IFxyXG4gICAgfSk7IFxyXG4gIH0gXHJcbiAgY2xvc2UoKSB7IFxyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTsgXHJcbiAgfSBcclxuXHJcbiAgb3BlbigpIHsgXHJcbiAgICBzdXBlci5vcGVuKCk7IFxyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbi52YWx1ZSA9IHRoaXMuX3NhdmVCdXR0b25UZXh0OyBcclxuICB9IFxyXG59IFxyXG5cclxuIFxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHsgXHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGNhcmVlclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7IFxyXG4gICAgdGhpcy5fY2FyZWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJlZXJTZWxlY3Rvcik7IFxyXG4gIH0gXHJcblxyXG4gIGdldFVzZXJJbmZvKCkgeyBcclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIG9jY3VwYXRpb246IHRoaXMuX2NhcmVlci50ZXh0Q29udGVudCB9OyBcclxuICB9IFxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7IFxyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTsgXHJcbiAgICB0aGlzLl9jYXJlZXIudGV4dENvbnRlbnQgPSBkYXRhLm9jY3VwYXRpb247IFxyXG4gIH0gXHJcbn0gXHJcbiIsIi8vQWNjb3VudCBhbmQgUGxhY2UgU2VjdGlvbnNcclxuZXhwb3J0IGNvbnN0IGVkaXRBY2NvdW50T3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuYWNjb3VudF9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFjY291bnROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY291bnRfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBhY2NvdW50VGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3VudF9fZGVzY3JpcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBhY2NvdW50TmFtZSA9IFwiLmFjY291bnRfX25hbWVcIjtcclxuZXhwb3J0IGNvbnN0IGFjY291bnRUaXRsZSA9IFxyXG4gIFwiLmFjY291bnRfX2Rlc2NyaXB0aW9uXCJcclxuO1xyXG5leHBvcnQgY29uc3QgYWNjb3VudEZvcm0gPSBcIiNhY2NvdW50X19lZGl0XCI7XHJcbmV4cG9ydCBjb25zdCBlZGl0QWNjb3VudENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1jbG9zZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWNjb3VudE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19hY2NvdW50LW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEFjY291bnRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2FjY291bnQtZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3Qgc3VibWl0QWNjb3VudEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lZGl0LWZvcm1cIik7XHJcblxyXG4vLyBQb3B1cCBTZWN0aW9uc1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRQbGFjZUZvcm0gPSBcIiNhZGRfX3BsYWNlXCI7XHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZXNPcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkUGxhY2VDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX3BsYWNlLWNsb3NlLWJ0blwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFBsYWNlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFBsYWNlVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGxhY2UtbGlua1wiKTtcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdE5ld1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGxhY2UtZm9ybVwiKTtcclxuXHJcbi8vIENhcmRzIExpc3RcclxuZXhwb3J0IGNvbnN0IHBsYWNlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG4vLyBQbGFjZSBDYXJkc1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiUmVhY2hpbmcgZm9yIHRoZSBNb29uXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvODgvOWIvMzYvODg5YjM2MDdiMmI5MzQzMGI0MGQ3ZjAzYWU5MThlOGQuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBvcnRyYWl0IG9mIEJhcmJhcmEgb2YgUG9ydHVnYWxcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC84YS9hMC83MC84YWEwNzA1MzE3OGNiMWJiYjRhM2Y5MzM3OWQ3NTBkMi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU2ltZXJlbnlhXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvNDYvNjYvMzAvNDY2NjMwNTBlMzg4NTUwYmYyNGI4MDg2MTc5NjI3MWUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkN1cGlkIGFuZCBQc3ljaGVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC8xNi9lMi84Yi8xNmUyOGJiYjQ4ODA4NWNmNWRmNjlmNjJjMDc3OTFjYi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU3RyZWV0IGluIHRoZSBFdmVuaW5nLCBQcmFndWVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9mZS84NS8zYi9mZTg1M2IxMmVlNTI5MGE0YjA5NjdlYzZlMjBkZTc4Mi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR2lybCBhdCB0aGUgUGlhbm9cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9kNy8wYi81My9kNzBiNTM0NzkxZjUwZjYyZTc0MTY2OWFlY2Q3YTQ3OS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR29pbmcgSG9tZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4L2FkLzUzLzJiL2FkNTMyYjMxYmJmY2QwMDZjNmI4ZjMzYTliNGNlYmYzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJSYWlueSBOaWdodFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzFhLzUwLzMyLzFhNTAzMjFiOTA1YjVkZGQ2MGIyODAyYzFiNTBhZDRiLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJUaGUgU3ByZWFkaW5nIFRyZWVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9kNi9iMi9mOS9kNmIyZjk0NjU3OTdjNGFkZWM1ZmNhNjQxYTFkZDJkOC5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8gVmFsaWRhdG9yc1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtdHlwZS1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiLy8gSW5kZXggQ1NTIEltcG9ydFxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSlMgSW1wb3J0c1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL2FwaS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgZWRpdEFjY291bnRPcGVuQnRuLFxyXG4gIGFjY291bnROYW1lLFxyXG4gIGFjY291bnRUaXRsZSxcclxuICBhY2NvdW50Rm9ybSxcclxuICBwb3B1cEFjY291bnROYW1lLFxyXG4gIGFjY291bnROYW1lSW5wdXQsXHJcbiAgYWNjb3VudFRpdGxlSW5wdXQsXHJcbiAgcG9wdXBBY2NvdW50VGl0bGUsXHJcbiAgc3VibWl0QWNjb3VudEVkaXQsXHJcbiAgcG9wdXBBZGRQbGFjZUZvcm0sXHJcbiAgYWRkUGxhY2VzT3BlbkJ0bixcclxuICBwb3B1cFBsYWNlTmFtZSxcclxuICBwb3B1cFBsYWNlVXJsLFxyXG4gIHN1Ym1pdE5ld1BsYWNlLFxyXG4gIHBsYWNlTGlzdCxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSAoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGF1dGhUb2tlbjogXCIwOTk5ODlmNy05NzQyLTQ2ZWYtOTlmOC1hYThlNjg3MmE2YzNcIlxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBuZXdVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IFxyXG4gICAgbmFtZVNlbGVjdG9yOiBhY2NvdW50TmFtZSwgXHJcbiAgICBjYXJlZXJTZWxlY3RvcjogYWNjb3VudFRpdGxlXHJcbiAgfSk7IFxyXG5cclxuICBhcGkuZ2V0VXNlckluZm8oKS50aGVuKHVzZXJEYXRhID0+IHtcclxuICAgIFVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgb2NjdXBhdGlvbjogdXNlckRhdGEuYWJvdXRcclxuICAgIH0pXHJcbiAgfSk7XHJcblxyXG4vLyBDYXJkIEZ1bmN0aW9uc1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4geyBcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoIFxyXG4gICAgY2FyZERhdGEsIFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgKCkgPT4geyBcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrKGNhcmREYXRhKTsgXHJcbiAgICB9LCBcclxuXHJcbiAgICAoKSA9PiB7IFxyXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKS5jaGlsZE5vZGVzLmxlbmd0aCkgeyBcclxuICAgICAgICBkb2N1bWVudCBcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19uby1wbGFjZXNcIikgXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRzX19uby1wbGFjZXNfYWN0aXZlXCIpOyBcclxuICAgICAgfSBlbHNlIHsgXHJcblxyXG4gICAgICAgIGRvY3VtZW50IFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX25vLXBsYWNlc1wiKSBcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZHNfX25vLXBsYWNlc19hY3RpdmVcIik7IFxyXG4gICAgICB9IFxyXG4gICAgfSBcclxuICApOyBcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7IFxyXG59OyBcclxuXHJcbiBcclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbiggXHJcbiAgeyBcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsIFxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4geyBcclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmREYXRhKSk7IFxyXG4gICAgfSwgXHJcbiAgfSwgXHJcbiAgcGxhY2VMaXN0IFxyXG4pOyBcclxuXHJcblxyXG5cclxuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjdmlld19faW1hZ2VcIik7IFxyXG5cclxuIFxyXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoaXRlbSkgPT4geyBcclxuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTsgXHJcbn07XHJcbi8vQ2FyZCBTdWJtaXQgRm9ybVxyXG5jb25zdCBhZGROZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRQbGFjZUZvcm0sIHsgXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHsgXHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpOyBcclxuICAgIGFkZE5ld0NhcmQuY2xvc2UoKTsgXHJcbiAgfSwgXHJcbn0pOyBcclxuIFxyXG5hZGRQbGFjZXNPcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxyXG4gIGFkZE5ld0NhcmQub3BlbigpOyBcclxuICBwbGFjZXNGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyBcclxufSk7IFxyXG4vL0VkaXQgU3VibWl0IEZvcm1cclxuIFxyXG5cclxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGFjY291bnRGb3JtLCB7IFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7IFxyXG4gICAgbmV3VXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7IFxyXG4gICAgZWRpdEZvcm1Qb3B1cC5jbG9zZSgpOyBcclxuICB9LCBcclxufSk7IFxyXG5cclxuZWRpdEFjY291bnRPcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxyXG4gIGNvbnN0IHtuYW1lLCBvY2N1cGF0aW9ufSA9IG5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICBwb3B1cEFjY291bnROYW1lLnZhbHVlID0gbmFtZTtcclxuICBwb3B1cEFjY291bnRUaXRsZS52YWx1ZSA9IG9jY3VwYXRpb247XHJcbiAgZWRpdEZvcm1Qb3B1cC5vcGVuKCk7IFxyXG4gIGFjY291bnRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyBcclxufSk7IFxyXG5cclxuY29uc3QgYWNjb3VudEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgc3VibWl0QWNjb3VudEVkaXRcclxuKTtcclxuXHJcbmNvbnN0IHBsYWNlc0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgc3VibWl0TmV3UGxhY2VcclxuKTtcclxuXHJcblxyXG5hcGkuZ2V0Q2FyZExpc3QoKS50aGVuKGNhcmRzID0+IHtcclxuICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbn0gXHJcbik7XHJcbnBsYWNlc0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hY2NvdW50Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbnByZXZpZXdJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG5hZGROZXdDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7ICIsImNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7YmFzZVVybCwgYXV0aFRva2VufSkge1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuX2F1dGhUb2tlbiA9IGF1dGhUb2tlbjtcclxuICAgIH1cclxuXHJcblxyXG4vLyBHRVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkc1xyXG5cclxuICAgIGdldENhcmRMaXN0KCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIwOTk5ODlmNy05NzQyLTQ2ZWYtOTlmOC1hYThlNjg3MmE2YzNcIlxyXG4gIH1cclxufSlcclxuICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICB9KTtcclxufVxyXG5cclxuLy8gR0VUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvdXNlcnMvbWVcclxuIGdldFVzZXJJbmZvKCkge1xyXG4gIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCIwOTk5ODlmNy05NzQyLTQ2ZWYtOTlmOC1hYThlNjg3MmE2YzNcIlxyXG4gICAgfVxyXG4gIH0pXHJcbiAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcblxyXG4vLyBQT1NUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcclxuLy8gYWRkQ2FyZCh7bmFtZSwgbGlua30pIHtcclxuXHJcbi8vIH1cclxuXHJcblxyXG4vLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkcy9jYXJkSWRcclxuLy8gcmVtb3ZlQ2FyZChjYXJkSUQpIHtcclxuXHJcbi8vIH1cclxuXHJcbi8vIC8vIFBVVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzL2xpa2VzL2NhcmRJZFxyXG5cclxuLy8gLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHMvbGlrZXMvY2FyZElkXHJcbi8vIGNoYW5nZUxpa2VDYXJkU3RhdHVzKGNhcmRJZCwgbGlrZSkge31cclxuXHJcbi8vIC8vIFBBVENIIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvdXNlcnMvbWVcclxuLy8gc2V0VXNlckluZm8oKSB7fVxyXG5cclxuLy8gLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZS9hdmF0YXJcclxuLy8gc2V0VXNlckF2YXRhcmdpdCgpIHt9XHJcblxyXG5cclxuXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcGk7XHJcbiIsImNsYXNzIENhcmQgeyBcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykgeyBcclxuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrOyBcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7IFxyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluazsgXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7IFxyXG4gIH0gXHJcbiBcclxuICBfaGFuZGxlTGlrZUJ1dHRvbiA9IChldnQpID0+IHsgXHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19wbGFjZS1mYXZvcml0ZV9hY3RpdmVcIik7IFxyXG4gIH07IFxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uID0gKCkgPT4geyBcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpOyBcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDsgXHJcbiAgfTsgXHJcbi8vcnVucyAzcmQgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkgeyBcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50IFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19wbGFjZS1mYXZvcml0ZVwiKSBcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTsgXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzLl9jYXJkRWxlbWVudCk7IFxyXG4gICAgfSk7IFxyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50IFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKSBcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrKHsgbGluazp0aGlzLl9saW5rLCBuYW1lOnRoaXMuX25hbWV9KTsgXHJcbiAgICAgIH0pOyBcclxuICB9IFxyXG4vL3J1bnMgMm5kIFxyXG4gIF9nZXRUZW1wbGF0ZSgpIHsgXHJcbiAgICByZXR1cm4gZG9jdW1lbnQgXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikgXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTsgXHJcbiAgfSBcclxuXHJcbi8vcnVucyAxc3QgXHJcblxyXG5cclxuXHJcbmdldFZpZXcoKSB7IFxyXG4gIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTsgXHJcbiAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19wbGFjZS1uYW1lXCIpLnRleHRDb250ZW50ID0gXHJcbiAgICB0aGlzLl9uYW1lOyBcclxuICBjb25zdCBwaG90b0VsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpOyBcclxuICBwaG90b0VsZW1lbnQuc3JjID0gdGhpcy5fbGluazsgXHJcbiAgcGhvdG9FbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7IFxyXG4gIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG4gIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDsgXHJcbn1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyBcclxuXHJcbiAiLCJjbGFzcyBTZWN0aW9uIHtcclxuIFxyXG5cclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHsgXHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7IFxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7IFxyXG4gIH0gXHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkgeyBcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpOyBcclxuICB9IFxyXG5cclxuICByZW5kZXJJdGVtcygpIHsgXHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsgXHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyBcclxuICAgIH0pOyBcclxuICB9IFxyXG59IFxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4gIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7IFxyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7IFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHsgXHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1wcmV2aWV3XCIpOyBcclxuICB9IFxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHsgXHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkSW1hZ2U7IFxyXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7IFxyXG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7IFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXHJcbiAgICAgIFwiLnBvcHVwX19wcmV2aWV3LW5hbWVcIiBcclxuICAgICkudGV4dENvbnRlbnQgPSBuYW1lOyBcclxuICAgIHN1cGVyLm9wZW4oKTsgXHJcbiAgfSBcclxufSBcclxuXHJcbiBcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyAiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybSIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2d250IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2siLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3NhdmVCdXR0b24iLCJfc2F2ZUJ1dHRvblRleHQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9vYmpEYXRhIiwiaW5wdXQiLCJuYW1lIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwiX29iaklucHV0IiwiY29uc29sZSIsImxvZyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJjYXJlZXJTZWxlY3RvciIsIl9uYW1lIiwiX2NhcmVlciIsImdldFVzZXJJbmZvIiwib2NjdXBhdGlvbiIsInNldFVzZXJJbmZvIiwiZWRpdEFjY291bnRPcGVuQnRuIiwicG9wdXBBY2NvdW50TmFtZSIsInBvcHVwQWNjb3VudFRpdGxlIiwic3VibWl0QWNjb3VudEVkaXQiLCJhZGRQbGFjZXNPcGVuQnRuIiwic3VibWl0TmV3UGxhY2UiLCJwbGFjZUxpc3QiLCJhcGkiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiX2Jhc2VVcmwiLCJfYXV0aFRva2VuIiwiZ2V0Q2FyZExpc3QiLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsImpzb24iLCJyZXN1bHQiLCJjYXRjaCIsImVyciIsIm5ld1VzZXJJbmZvIiwidXNlckRhdGEiLCJhYm91dCIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwicGhvdG9FbGVtZW50Iiwic3JjIiwiYWx0IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsImNhcmRMaXN0IiwiY29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsInByZXZpZXdJbWFnZVBvcHVwIiwiX2NhcmRJbWFnZSIsImltYWdlRWxlbWVudCIsImFkZE5ld0NhcmQiLCJQb3B1cFdpdGhGb3JtIiwicGxhY2VzRm9ybVZhbGlkYXRvciIsImVkaXRGb3JtUG9wdXAiLCJhY2NvdW50Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=